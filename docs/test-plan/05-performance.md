## 5. Performance Testing (Manual / Profiling)

**Goal:** Ensure the app is responsive and performs well.

- [ ] Measure app startup time.
- [ ] Observe screen transition smoothness.
- [ ] Observe responsiveness during image selection/camera use.
- [ ] Measure time taken for video generation (API dependent).
- [ ] Measure time taken for Shotstack video stitching (API dependent, varies with number/length of clips).
    - [ ] Test with 2 short clips.
    - [ ] Test with 5 short clips.
    - [ ] Test with clips of varying lengths.
- [ ] Observe video playback smoothness (no stuttering/lagging on test devices).
- [ ] Use Expo Go performance monitor or device-specific profiling tools to check for high CPU/memory usage or slow JS thread performance.
- [ ] Test on lower-end devices if available.

## Performance Test Cases

*   **Test Case:** Measure time from selecting theme to first API call (`VideoService` start).
    *   **Expected:** Minimal delay (< 500ms).
*   **Test Case:** Measure time for image encoding (`_encodeImageAsDataUri`).
    *   **Expected:** Reasonable time based on image size (e.g., < 1s for typical image).
*   **Test Case:** Measure time for MiniMax task creation API call.
    *   **Expected:** Network latency + API processing time (should be relatively quick).
*   **Test Case:** Measure time for MiniMax polling completion.
    *   **Expected:** Varies, but should align with API expectations and not exceed `MAX_POLLING_TIME_MS`. Monitor average/p95 times.
*   **Test Case:** Measure time for Shotstack job submission.
    *   **Expected:** Network latency + API processing time.
*   **Test Case:** Measure time for Shotstack polling completion.
    *   **Expected:** Varies based on video length/complexity. Monitor average/p95 times.
*   **Test Case:** Measure total time for end-to-end single video generation (cache miss).
    *   **Expected:** Sum of above steps. Establish a baseline target (e.g., < 3 minutes).
*   **Test Case:** Measure total time for end-to-end single video generation (cache hit).
    *   **Expected:** Very fast (< 1s).
*   **Test Case:** Measure total time for end-to-end narrative video generation (2 clips, optimized polling).
    *   **Expected:** Significantly faster than 5 clips. Establish a baseline target (e.g., < 5 minutes?).
*   **Test Case:** Measure duration of individual clips generated by MiniMax.
    *   **Expected:** Record actual durations to compare against estimate and inform stitching logic.